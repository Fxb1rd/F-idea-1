<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>idea1</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="js/jquery-3.2.1.js"></script>
</head>
<body>
    <div class="page">
        <section class="movie">

                <article class="container" id="movie1">
                    <div class="warpper">
                        <img src="img/movie/zmID.jpg" alt="">
                        <span>致<br>命<br>I<br>D</span>
                        <p>电影的剧情结构严谨，情节一气呵成，结尾部分出人意料。是悬疑惊悚系列必看电影</p>
                    </div>
                </article>
                <article class="container" id="movie2">
                    <div class="warpper">
                        <img src="img/movie/dmkj.jpg" alt="">
                        <span>盗<br>梦<br>空<br>间</span>

                    </div>
                </article>
                <article class="container" id="movie3">
                    <div class="warpper">
                        <img src="img/movie/127hours.jpg" alt="">
                        <span>127<br>小<br>时</span>
                    </div>
                </article>

        </section>
        <section class="book">

                <article class="container" id="book1"></article>
                <article class="container" id="book2"></article>
                <article class="container" id="book3"></article>

        </section>
    </div>
<script type="text/javascript">
window.onload = function() {
    for (var i = 1; i <= 3; i++) {
        $(".container").eq(i-1).delay(300*i).animate({width:'365px', height: '350'},300);
    };
};
/*切换*/
$("section.book").click(function() {
    for (var i = 4; i <= 6; i++) {
        $(".container").eq(i-1).delay(300*(i-3)).animate({width:'365px', height: '350'},300);
    };
    $(this).animate({left:'4%'},500);
    $("section.movie").animate({left:'-92%'},500);
});
$("section.movie").click(function() {
    $(this).animate({left:'0'},500);
    $("section.book").animate({left:'96%'},500);
});
/*mouseout mouseover 会触发冒泡事件 mousenter mouseleave 不会触发冒泡事件*/
//delay() 控制动画执行顺序
//stop（）防止动画多次触发
$(".container").mouseenter(function() {
    $(this).find("img").css("-webkit-filter","blur(5px)");
    $(this).find("span").stop(true).animate({left:'10px'} ,200);
    $(this).find("p").stop(true).delay(200).slideDown(200);
});
$(".container").mouseleave(function() {
    $(".container").animate({width:'365'},200).find("span").css("display","block");;
    $(this).find("img").css("-webkit-filter","blur(0px)");
    $(this).find("span").delay(200).animate({left:'220px'}, 200);
    $(this).find("p").slideUp(200);
});
///展开函数
for (var j = 0; j < 6; j++) {
    (function(j) {
        var a;
        var b;
        if (j<3) {
            a = (j+1)%3;
            b = (j+2)%3;
        }
        else {
            a = (j+1)%3+3;
            b = (j+2)%3+3;
        };
        $(".container").eq(j).mouseenter(function() {
            $(".container").eq(j).stop(true).delay(400).animate({width:'595'},200);
            $(".container").eq(a).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
            $(".container").eq(b).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
        });
    })(j);
 };
//上面的函数等于下面注释部分，采用了动态绑定，闭包，立即执行函数
/*$(".container").eq(0).mouseenter(function() {
    $(".container").eq(0).stop(true).delay(400).animate({width:'595'},200);
    $(".container").eq(1).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
    $(".container").eq(2).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
});
$(".container").eq(1).mouseenter(function() {
    $(".container").eq(1).stop(true).delay(400).animate({width:'595'},200);
    $(".container").eq(2).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
    $(".container").eq(0).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
});
$(".container").eq(2).mouseenter(function() {
    $(".container").eq(2).stop(true).delay(400).animate({width:'595'},200);
    $(".container").eq(0).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
    $(".container").eq(1).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
});
$(".container").eq(3).mouseenter(function() {
    $(".container").eq(3).stop(true).delay(400).animate({width:'595'},200);
    $(".container").eq(4).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
    $(".container").eq(5).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
});
$(".container").eq(4).mouseenter(function() {
    $(".container").eq(4).stop(true).delay(400).animate({width:'595'},200);
    $(".container").eq(5).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
    $(".container").eq(3).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
});
$(".container").eq(5).mouseenter(function() {
    $(".container").eq(5).stop(true).delay(400).animate({width:'595'},200);
    $(".container").eq(3).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
    $(".container").eq(4).stop(true).delay(400).animate({width:'250'},200).find("span").css("display","none");
});*/
</script>
</body>
</html>